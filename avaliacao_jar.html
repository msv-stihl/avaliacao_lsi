<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style_jar.css">
    <title>Avaliação Jardinagem</title>
</head>
<body>
    <div class="screen">
    <form class="form" id="form">
        <div class="header">
            <h1 class="title">Avaliação de Eficácia | Jardinagem</h1>
            <div class="nome">
                <label for="nome">Digite seu nome:</label>
                <input type="text" name="nome" id="nome" required>
            </div>
            <div class="predio">
                <label for="predios">Selecione o prédio:</label>
                <select id="predios" name="predios" class="predio-selecao" required>
                    <option value="P01">P01</option>
                    <option value="P02">P02</option>
                    <option value="P03">P03</option>
                    <option value="P04">P04</option>
                    <option value="P07">P07</option>
                    <option value="P08">P08</option>
                    <option value="P11">P11</option>
                    <option value="P15">P15</option>
                    <option value="P16">P16</option>
                    <option value="P18">P18</option>
                    <option value="P20">P20</option>
                    <option value="P22">P22</option>
                    <option value="P26">P26</option>
                    <option value="P27">P27</option>
                    <option value="P28">P28</option>
                    <option value="P29">P29</option>
                    <option value="P30">P30</option>
                    <option value="P31">P31</option>
                    <option value="P32">P32</option>
                    <option value="P35">P35</option>
                    <option value="P37">P37</option>
                    <option value="P38">P38</option>
                    <option value="P42">P42</option>
                    <option value="P43">P43</option>
                    <option value="P48">P48</option>
                    <option value="P49">P49</option>
                    <option value="P50">P50</option>
                    <option value="P52">P52</option>
                    <option value="P56">P56</option>
                </select>
            </div>
            <div class="local">
                <label for="local">Local avaliado:</label>
                <input type="text" name="local" id="local" required>
            </div>
        </div>
        <div class="grid">
            <div class="row">
                <label for="corte" class="label">Corte de grama</label>
                <div class="options">
                    <input type="radio" name="corte" id="corte" class="button_happy" value="1" required>
                    <input type="radio" name="corte" id="corte" class="button_sad" value="0">
                    <input type="radio" name="corte" id="corte" class="button_na" value="2" checked>
                </div>
            </div>
            <div class="row">
                <label for="jardins" class="label">Manutenção de jardins</label>
                <div class="options">
                    <input type="radio" name="jardins" id="jardins" class="button_happy" value="1" required>
                    <input type="radio" name="jardins" id="jardins" class="button_sad" value="0">
                    <input type="radio" name="jardins" id="jardins" class="button_na" value="2" checked>
                </div>
            </div>
            <div class="row">
                <label for="podas" class="label">Podas</label>
                <div class="options">
                    <input type="radio" name="podas" id="podas" class="button_happy" value="1" required>
                    <input type="radio" name="podas" id="podas" class="button_sad" value="0">
                    <input type="radio" name="podas" id="podas" class="button_na" value="2" checked>
                </div>
            </div>
        </div>
        <input type="hidden" name="date" id="date" value="">
        <div class="submit">
            <label for="submit"></label>
            <input type="submit" name="submit" id="submit" class="submit-button" value="Enviar">
        </div>
    </form>
    <!--div class="submit">
        <button onclick="SubForm()" class="submit-button">Avaliar</button>
    </div-->
    </div>
    <script>
        /*function SubForm (){
            getDate()
            const dados = {
                planilha: "jar",
                nome: document.getElementById("nome").value,
                predio: document.getElementById("predios").value,
                local: document.getElementById("local").value,
                corte: document.getElementById("corte").value,
                jardins: document.getElementById("jardins").value,
                podas: document.getElementById("podas").value,
                data: document.getElementById("date").value
            };
            const formData = new FormData();
            for (const chave in dados) {
                formData.append(chave, dados[chave]);
            };
            const fields = document.querySelectorAll('#form');
            if(fields[0][0].value == "" || fields[0][2].value == ""){
                alert("Preencha todos os campos antes de enviar");
                location.reload();
            } else {
                fetch("https://script.google.com/macros/s/AKfycbx-2uxmh-T890MdXfN4qYZDykpa-woanzzOVzw6cMQKCkjrZlZ700H2xvtlZ6PcMT_O/exec", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(dados)
                    })
                    .then(response => response.text())
                    .then(result => {
                    console.log("Dados enviados:", result);
                    })
                    .catch(error => {
                    console.error("Erro ao enviar:", error);
                });
            }
        }
        */

        function getDate(){
            const date = new Date().toLocaleString()
            document.getElementById('date').value = date
        }

        var form = document.getElementById("form");
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(form);
            const scriptURL = 'https://script.google.com/macros/s/AKfycbx-2uxmh-T890MdXfN4qYZDykpa-woanzzOVzw6cMQKCkjrZlZ700H2xvtlZ6PcMT_O/exec'; // <-- Paste your Web App URL here

            fetch(scriptURL, { method: 'POST', body: formData })
                .then(response => response.json())
                .then(data => {
                    if (data.result === 'success') {
                        alert("Resposta enviada!");
                        form.reset();
                    } else {
                        throw new Error(data.error);
                    }
                })
                .catch(error => {
                    alert('Erro!', error.message);
                    console.error('Error!', error.message);
                });
        });

    </script>
</body>
</html>
